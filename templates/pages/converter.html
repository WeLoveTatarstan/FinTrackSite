{% extends 'base.html' %}
{% load static %}
{% block title %}Конвертатор · FinTrack{% endblock %}
{% block content %}
<h1 class="title">Конвертер валют</h1>

<div class="card" style="margin-bottom:18px;">
  <div class="form" style="grid-template-columns: 1fr 1fr; gap:12px;">
    <div class="field">
      <label>Сумма</label>
      <input type="number" id="amount" value="1" min="0" step="0.01">
    </div>
    <div class="field">
      <label>Из валюты</label>
      <select id="from">
        {% for code, rate in rates.items %}
          <option value="{{ code }}" {% if code == base_currency %}selected{% endif %}>{{ code }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="field">
      <label>В валюту</label>
      <select id="to">
        {% for code, rate in rates.items %}
          <option value="{{ code }}">{{ code }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="field">
      <label>Результат</label>
      <input type="text" id="result" readonly>
    </div>
  </div>
  <button class="btn primary" id="convertBtn" style="margin-top:10px;">Конвертировать</button>
  <p class="muted">Курсы статичны и заданы для демонстрации.</p>
  <script src="{% static 'js/converter.js' %}"></script>
  <script>
    window.CONVERTER_RATES = {{ rates|safe }};
  </script>
  </div>

<div class="card">
  <h2 class="title" style="font-size:18px;">Курсы валют (база: {{ base_currency }})</h2>
  <table style="width:100%;border-collapse:collapse">
    <thead>
      <tr>
        <th style="text-align:left;padding:8px;color:#7082a6;font-weight:500;">Валюта</th>
        <th style="text-align:right;padding:8px;color:#7082a6;font-weight:500;">Курс</th>
      </tr>
    </thead>
    <tbody>
      {% for code, rate in rates.items %}
      <tr style="border-top:1px solid #e6ecf8">
        <td style="padding:10px 8px;">{{ code }}</td>
        <td style="padding:10px 8px;text-align:right;">{{ rate }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="card" style="margin-top:18px;">
  <h2 class="title" style="font-size:18px;">Драгоценные металлы (USD за тройскую унцию)</h2>
  <table style="width:100%;border-collapse:collapse">
    <thead>
      <tr>
        <th style="text-align:left;padding:8px;color:#7082a6;font-weight:500;">Металл</th>
        <th style="text-align:right;padding:8px;color:#7082a6;font-weight:500;">Цена, $</th>
      </tr>
    </thead>
    <tbody>
      {% for code, price in metals.items %}
      <tr style="border-top:1px solid #e6ecf8">
        <td style="padding:10px 8px;">{{ code }}</td>
        <td style="padding:10px 8px;text-align:right;">{{ price }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


